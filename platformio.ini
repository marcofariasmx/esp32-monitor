[env:esp32c3]
platform = espressif32
board = esp32-c3-devkitm-1
framework = arduino
monitor_speed = 115200
upload_speed = 460800
lib_deps =
    ArduinoOTA
    adafruit/Adafruit BMP280 Library@^2.6.8
    adafruit/Adafruit AHTX0@^2.0.5
    adafruit/Adafruit Unified Sensor@^1.1.14
build_flags =
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DBOARD_ESP32C3  ; Select ESP32-C3 board configuration
board_build.flash_mode = dio

[env:esp32wroom]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
upload_speed = 921600
lib_deps =
    ArduinoOTA
    adafruit/Adafruit BMP280 Library@^2.6.8
    adafruit/Adafruit AHTX0@^2.0.5
    adafruit/Adafruit Unified Sensor@^1.1.14
build_flags =
    -DBOARD_ESP32_WROOM  ; Select ESP32 WROOM-32 board configuration

; OTA Upload Configuration
; Switch between USB and OTA by commenting/uncommenting the appropriate section
;
; âš  IMPORTANT: Before OTA upload, call /prepare-ota endpoint to disable WiFi power save:
;   curl http://<ESP32_IP>/prepare-ota
; This temporarily disables WiFi modem sleep for 5 minutes to prevent packet loss.
; WiFi power save is enabled by default to conserve power.
;
; Then upload within 5 minutes:
;   pio run -t upload --upload-port <ESP32_IP>

; === OTA Upload (WiFi) - INACTIVE ===
; upload_protocol = espota
; upload_port = 192.168.50.78  ; ESP32 WROOM-32 IP address
; upload_flags =
;     --port=3232
;     --auth=admin
;     --timeout=60

; === USB Upload - ACTIVE ===
upload_protocol = esptool
upload_port = /dev/cu.usbserial-0001
